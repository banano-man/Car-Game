#include <LiquidCrystal.h>

LiquidCrystal lcd(12, 11, 5, 4, 3, 2);
int potPosition = 3, gameStarted = 0, result = 0;
const int buttonPin = 8;

//Иконка на играч
//Задна част
byte player1[8] = {
  B00000,
  B00000,
  B00111,
  B01001,
  B11111,
  B11111,
  B00110,
  B00000
};
//Предна част
byte player2[8] = {
  B00000,
  B00000,
  B11000,
  B00100,
  B11111,
  B11111,
  B00110,
  B0000
};

//Иконка кола
//Предна част
byte car1[8] = {
  B00000,
  B00000,
  B00011,
  B00100,
  B11111,
  B11111,
  B01100,
  B00000
};
//Задна част
byte car2[8] = {
  B00000,
  B00000,
  B11100,
  B10010,
  B11111,
  B11111,
  B01100,
  B00000
};

//Иконка мотор
//Предна част
byte bike1[8] = {
  B00000,
  B00000,
  B00001,
  B00010,
  B00110,
  B01101,
  B01100,
  B00000
};
//Задна част
byte bike2[8] = {
  B00000,
  B00000,
  B00000,
  B00110,
  B11100,
  B11011,
  B00011,
  B00000
};

//Иконка камион
//Предна част
byte truck1[8] = {
  B00000,
  B00010,
  B00110,
  B01010,
  B11110,
  B11111,
  B01100,
  B00000
};
//Задна част
byte truck2[8] = {
  B00000,
  B11111,
  B11111,
  B11111,
  B11111,
  B11111,
  B00110,
  B00000
};

void setup() {
  lcd.begin(16, 2);
  
  //Създаване на иконките
  lcd.createChar(1, player1);
  lcd.createChar(2, player2);
  lcd.createChar(3, car1);
  lcd.createChar(4, car2);
  lcd.createChar(5, bike1);
  lcd.createChar(6, bike2);
  lcd.createChar(7, truck1);
  lcd.createChar(8, truck2);
  
  Serial.begin(9600);
  pinMode(buttonPin, INPUT);
}

void loop() {
  if(gameStarted == 0) {begin();}
  else if (potPosition == 3) {level1();}
  else if(potPosition == 2) {level2();}
  else {level3();}
}
//Начален екран за избиране на ниво
void begin()
{
  lcd.clear();
  lcd.setCursor(1,0);
  lcd.print("Choose a level");
  while(digitalRead(buttonPin) == HIGH){
  potPosition = analogRead(A0);
  //potPosition = map(potPosition, 0, 1023, 1, 3);
  lcd.setCursor(6, 1);
  lcd.print("1 2 3");
  delay(500);
  if(potPosition>=683)
  {
    lcd.setCursor(6, 1);
    lcd.print(" ");
  }
  else if(potPosition>=342)
  {
	lcd.setCursor(8, 1);
    lcd.print(" ");
  }
  else
  {
    lcd.setCursor(10, 1);
    lcd.print(" ");
  }
  delay(500);
  }
  gameStarted = 1;
}
//Загуба
void lost()
{
  delay(1000);
  lcd.clear();
  lcd.setCursor(4,0);
  lcd.print("You lost!"); 
  while(digitalRead(buttonPin) == HIGH)
  {
    lcd.setCursor(1,1);
    lcd.print("[press button]");
    delay(500);
    lcd.setCursor(1,1);
    lcd.print("              ");
    delay(500);
  }
  choice();
}
//Победа
void won()
{
  delay(1000);
  lcd.clear();
  lcd.setCursor(4,0);
  lcd.print("You won!"); 
  while(digitalRead(buttonPin) == HIGH)
  {
    lcd.setCursor(1,1);
    lcd.print("[press button]");
    delay(500);
    lcd.setCursor(1,1);
    lcd.print("              ");
    delay(500);
  }
  choice();
}
//Рестарт или друго ниво
void choice()
{
  byte ch[8]={B00000, B00010, 
              B00110, B01110, 
              B01110, B00110,
              B00010, B00000};
  lcd.createChar(10, ch);
  delay(1000);
  lcd.clear();
  lcd.setCursor(0,0);
  lcd.print("restart");
  lcd.setCursor(0,1);
  lcd.print("return");
  while(digitalRead(buttonPin)==HIGH)
  {
    potPosition = analogRead(A0);
    //potPosition = map(potPosition, 0, 1023, 1, 2);
    if(potPosition <512)
    {
      lcd.setCursor(15,0);
      lcd.write(10);
      lcd.setCursor(0,0);
      lcd.print("             ");
      delay(500);
      lcd.setCursor(0,0);
      lcd.print("restart");
      delay(500);
    }
    else
    {
      gameStarted = 0;
      lcd.setCursor(15,1);
      lcd.write(10);
      lcd.setCursor(0,1);
      lcd.print("              ");
      delay(500);
      lcd.setCursor(0,1);
      lcd.print("return");
      delay(500); 
    }
    lcd.setCursor(15,0);
    lcd.print(" ");
    lcd.setCursor(15,1);
    lcd.print(" ");
  }
  delay(1000);
}
//Първо ниво
void level1()
{
  lcd.clear();
  
  //първо ниво код
  
  if(result == 0) {lost();}
  else if(result == 1) {won();}
}
//Второ ниво
void level2()
{
  lcd.clear();
  //второ ниво код
  if(result == 0) {lost();}
  else if(result == 1) {won();}
}
//Трето ниво
void level3()
{
  lcd.clear();
  //трето ниво код
  if(result == 0) {lost();}
  else if(result == 1) {won();}
}


------------------------------
//valeri-random
#include <LiquidCrystal.h>
int dinPos = 3, c1Pos = 15, potPosition = 3;
LiquidCrystal lcd(12, 11, 5, 4, 3, 2);
byte dinosaurio[8]={
  B00111,
  B10111,
  B10110,
  B11111,
  B11110,
  B01110,
  B01000,
  B01100  
};
byte cactus[8]={
  B00110,
  B10110,
  B10110,
  B11110,
  B11110,
  B00110,
  B00110,
  B11111
};
const int boton=8;
//long r = random(3,6);
//int positions[5];
void scroll(){
  lcd.scrollDisplayLeft();
}

void setup()
{
  lcd.begin(16,2);
  lcd.createChar(1,dinosaurio);
  lcd.createChar(2,cactus);
  Serial.begin(9600);
  pinMode(boton,INPUT);
}
void loop()
{
    for(int q=2; q<random(7,11); q++){
      scroll();
      dino();
      delay(300);
      if(c1Pos == 39) {c1Pos = 0;}
  else c1Pos++;
    }
  
    lcd.setCursor(c1Pos,random(0,2));
   lcd.write(2);
    
  //}

}
void dino(){
  potPosition = analogRead(A0);
  if(potPosition <=500){
    lcd.setCursor(dinPos,0);
    lcd.write(1);
  }
  else{
    lcd.setCursor(dinPos,1);
    lcd.write(1);
  }
  if(dinPos==0){lcd.setCursor(39,0); lcd.print(" "); 
                lcd.setCursor(39,1); lcd.print(" ");}
    else {lcd.setCursor(dinPos-1,0); lcd.print(" ");
         lcd.setCursor(dinPos-1,1); lcd.print(" ");}
  if(dinPos == 39) {dinPos = 0;}
  else dinPos++;
}
