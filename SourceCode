#include <LiquidCrystal.h>

LiquidCrystal lcd(12, 11, 5, 4, 3, 2);
int potPosition = 3, gameStarted = 0, result = 0;
const int buttonPin = 8;
//Играч
//Друг
void setup() {
  lcd.begin(16, 2);
  Serial.begin(9600);
  pinMode(buttonPin, INPUT);
}

void loop() {
  if(gameStarted == 0) {begin();}
  else if (potPosition == 3) {level1();}
  else if(potPosition == 2) {level2();}
  else {level3();}
}
//Начален екран за избиране на ниво
void begin()
{
  lcd.clear();
  lcd.setCursor(1,0);
  lcd.print("Choose a level");
  while(digitalRead(buttonPin) == HIGH){
  potPosition = analogRead(A0);
  potPosition = map(potPosition, 0, 1023, 1, 3);
  lcd.setCursor(6, 1);
  lcd.print("1 2 3");
  delay(500);
  if(potPosition==3)
  {
    lcd.setCursor(6, 1);
    lcd.print(" ");
  }
  else if(potPosition==2)
  {
	lcd.setCursor(8, 1);
    lcd.print(" ");
  }
  else
  {
    lcd.setCursor(10, 1);
    lcd.print(" ");
  }
  delay(500);
  }
  gameStarted = 1;
}
//Загуба
void lost()
{
  delay(1000);
  lcd.clear();
  lcd.setCursor(4,0);
  lcd.print("You lost!"); 
  while(digitalRead(buttonPin) == HIGH)
  {
    lcd.setCursor(1,1);
    lcd.print("[press button]");
    delay(500);
    lcd.setCursor(1,1);
    lcd.print("              ");
    delay(500);
  }
  choice();
}
//Победа
void won()
{
  delay(1000);
  lcd.clear();
  lcd.setCursor(4,0);
  lcd.print("You won!"); 
  while(digitalRead(buttonPin) == HIGH)
  {
    lcd.setCursor(1,1);
    lcd.print("[press button]");
    delay(500);
    lcd.setCursor(1,1);
    lcd.print("              ");
    delay(500);
  }
  choice();
}
//Рестарт или друго ниво
void choice()
{
  byte ch[8]={B00000, B00010, 
              B00110, B01110, 
              B01110, B00110,
              B00010, B00000};
  lcd.createChar(10, ch);
  delay(1000);
  lcd.clear();
  lcd.setCursor(0,0);
  lcd.print("restart");
  lcd.setCursor(0,1);
  lcd.print("return");
  while(digitalRead(buttonPin)==HIGH)
  {
    potPosition = analogRead(A0);
    potPosition = map(potPosition, 0, 1023, 1, 2);
    if(potPosition == 1)
    {
      lcd.setCursor(15,0);
      lcd.write(10);
      lcd.setCursor(0,0);
      lcd.print("             ");
      delay(500);
      lcd.setCursor(0,0);
      lcd.print("restart");
      delay(500);
    }
    else
    {
      gameStarted = 0;
      lcd.setCursor(15,1);
      lcd.write(10);
      lcd.setCursor(0,1);
      lcd.print("              ");
      delay(500);
      lcd.setCursor(0,1);
      lcd.print("return");
      delay(500); 
    }
    lcd.setCursor(15,0);
    lcd.print(" ");
    lcd.setCursor(15,1);
    lcd.print(" ");
  }
  delay(1000);
}
//Първо ниво
void level1()
{
  lcd.clear();
  
  //първо ниво код
  
  if(result == 0) {lost();}
  else if(result == 1) {won();}
}
//Второ ниво
void level2()
{
  lcd.clear();
  //второ ниво код
  if(result == 0) {lost();}
  else if(result == 1) {won();}
}
//Трето ниво
void level3()
{
  lcd.clear();
  //трето ниво код
  if(result == 0) {lost();}
  else if(result == 1) {won();}
}
